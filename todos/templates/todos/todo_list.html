{% extends 'todos/base.html' %}
{% load static %}

{% block content %}
<div class="text-center mb-4">
    <h1>My Tasks</h1>
    <a href="{% url 'todo_create' %}" class="btn btn-primary"
        style="display: inline-flex; align-items: center; gap: 10px;">
        <img src="{% static 'todos/images/plus_icon.png' %}" alt="+"
            style="width: 48px; height: 48px; image-rendering: pixelated;">
        New Task
    </a>
</div>

<ul style="list-style: none; padding: 0;">
    {% for todo in todos %}
    <li
        style="border: 4px solid var(--dark-border); margin-bottom: 1rem; padding: 1rem; background-color: {% if todo.is_resolved %}#e6e6e6{% else %}#fff{% endif %}; position: relative;">
        <div class="flex justify-between">
            <div class="flex">
                {% if todo.is_resolved %}
                <img src="{% static 'todos/images/check_icon.png' %}" alt="Done"
                    style="width: 64px; height: 64px; image-rendering: pixelated; margin-right: 10px;">
                {% else %}
                <div
                    style="width: 64px; height: 64px; border: 4px solid var(--dark-border); background: white; margin-right: 10px; box-sizing: border-box;">
                </div>
                {% endif %}

                <div>
                    <h3
                        style="margin: 0; {% if todo.is_resolved %}text-decoration: line-through; color: #999;{% endif %}">
                        {{ todo.title }}
                    </h3>
                    {% if todo.due_date %}
                    <small style="color: #666;">Due: {{ todo.due_date }}</small>
                    {% endif %}
                </div>
            </div>

            <div class="flex">
                <a href="{% url 'todo_update' todo.pk %}" class="btn btn-accent" style="padding: 5px 10px;"
                    title="Edit">
                    <img src="{% static 'todos/images/edit_icon.png' %}" alt="Edit"
                        style="width: 48px; height: 48px; image-rendering: pixelated;">
                </a>
                <a href="{% url 'todo_delete' todo.pk %}" class="btn"
                    style="background-color: #ff9999; padding: 5px 10px;" title="Delete">
                    <img src="{% static 'todos/images/delete_icon.png' %}" alt="Delete"
                        style="width: 48px; height: 48px; image-rendering: pixelated;">
                </a>
            </div>
        </div>
    </li>
    {% empty %}
    <li class="text-center">
        <p>No tasks yet! Time to adventure!</p>
    </li>
    {% endfor %}
</ul>
{% endblock %}